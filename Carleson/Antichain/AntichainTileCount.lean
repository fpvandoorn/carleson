import Carleson.TileStructure
import Carleson.HardyLittlewood
import Carleson.Psi

noncomputable section

open scoped ENNReal ShortVariables

open GridStructure MeasureTheory Set

section

variable {X : Type*} {a : â„•} {q : â„} {K : X â†’ X â†’ â„‚} {Ïƒâ‚ Ïƒâ‚‚ : X â†’ â„¤} {F G : Set X}
  [MetricSpace X] [ProofData a q K Ïƒâ‚ Ïƒâ‚‚ F G] [TileStructure Q D Îº S o]

-- Lemma 6.3.1
lemma tile_reach {Ï‘ : Î˜ X} {N : â„•} {p p' : ğ”“ X} (hp : dist_(p) (ğ’¬ p) Ï‘ â‰¤ 2^N)
    (hp' : dist_(p') (ğ’¬ p') Ï‘ â‰¤ 2^N) (hI : ğ“˜ p â‰¤ ğ“˜ p') (hs : ğ”° p < ğ”° p'):
  smul (2^(N + 2)) p â‰¤ smul (2^(N + 2)) p' := sorry

-- Q : should this be a subset of ğ”„ instead? Let's see which version makes things easier
-- Def 6.3.15
def ğ”„_aux (ğ”„ : Finset (ğ”“ X)) (Ï‘ : Î˜ X) (N : â„•) : Finset (ğ”“ X) :=
  {p âˆˆ ğ”„ | 1 + dist_(p) (ğ’¬ p) Ï‘ âˆˆ Icc (2^N) (2^(N+1))}

open Classical

-- Lemma 6.3.2
lemma stack_density (ğ”„ : Finset (ğ”“ X)) (Ï‘ : Î˜ X) (N : â„•) (L : Grid X) :
    âˆ‘ (p âˆˆ {p âˆˆ (ğ”„_aux ğ”„ Ï‘ N) | ğ“˜ p = L}), volume (E p âˆ© G) â‰¤
      2^(a * (N + 5)) * densâ‚ (ğ”„ : Set (ğ”“ X)) * volume (coeGrid L) := sorry

-- Lemma 6.3.3
lemma local_antichain_density (ğ”„ : Finset (ğ”“ X)) (Ï‘ : Î˜ X) (N : â„•) : False := sorry

def C_6_3_4 (a N : â„•) : â„â‰¥0âˆ := 2^(101*a^3 + N*a)

-- Lemma 6.3.4
lemma global_antichain_density (ğ”„ : Finset (ğ”“ X)) (Ï‘ : Î˜ X) (N : â„•) :
    âˆ‘ (p âˆˆ ğ”„_aux ğ”„ Ï‘ N), volume (E p âˆ© G) â‰¤
      (C_6_3_4 a N) * densâ‚ (ğ”„ : Set (ğ”“ X)) * volume (â‹ƒ (p âˆˆ ğ”„), coeGrid (ğ“˜ p)) := sorry

-- Lemma 6.1.6
